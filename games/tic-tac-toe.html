<!--
Conceptualization:
- Game: Tic-Tac-Toe (Noughts & Crosses)
- Players: 2 players, hotseat on same device
- Objective: Players alternate placing X and O on a 3x3 grid. First to align 3 in a row (horiz/vert/diag) wins. If all 9 squares filled without a winner it's a draw.
- Controls: Click (or tap) a cell to place your mark. A reset button restarts the game.
- Constraints: Single-file HTML with embedded CSS and JS; no external assets.
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic‑Tac‑Toe</title>
  <style>
    :root{--bg:#f7f7fb;--tile:#fff;--accent:#1f6feb;--danger:#d93f3f}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);display:flex;align-items:flex-start;justify-content:center;padding:28px}
    .wrap{width:360px;background:linear-gradient(180deg,#fff,#fafaff);box-shadow:0 8px 30px rgba(20,20,50,0.08);border-radius:12px;padding:18px}
    h1{font-size:18px;margin:0 0 8px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .board{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .cell{background:var(--tile);aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;font-size:44px;font-weight:700;color:#222;border-radius:8px;user-select:none;cursor:pointer;box-shadow:inset 0 -2px 0 rgba(0,0,0,0.04)}
    .cell.disabled{cursor:not-allowed;opacity:0.7}
    .status{font-size:14px;color:#333}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.secondary{background:#eee;color:#222}
    .flash{animation:flash 1s ease}
    @keyframes flash{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Tic Tac Toe game">
    <h1>Tic‑Tac‑Toe</h1>
    <div class="meta">
      <div class="status" id="status">Player X's turn</div>
      <div><button id="reset">Reset</button></div>
    </div>

    <div class="board" id="board" aria-label="game board">
      <!-- cells inserted by JS -->
    </div>

    <div class="controls">
      <button id="undo" class="secondary">Undo</button>
      <button id="hint" class="secondary">Hint</button>
    </div>
  </div>

  <script>
    // Single-file Tic-Tac-Toe implementation (2-player hotseat)
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const resetBtn = document.getElementById('reset');
    const undoBtn = document.getElementById('undo');
    const hintBtn = document.getElementById('hint');

    let board = Array(9).fill(null); // null, 'X', 'O'
    let current = 'X';
    let gameOver = false;
    let history = [];

    const winningLines = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function render(){
      boardEl.innerHTML = '';
      board.forEach((v,i)=>{
        const cell = document.createElement('div');
        cell.className = 'cell' + (v? ' disabled':'');
        cell.tabIndex = v? -1 : 0;
        cell.setAttribute('role','button');
        cell.setAttribute('aria-label', v? `Cell ${i+1}: ${v}`:`Cell ${i+1}: empty`);
        cell.textContent = v || '';
        cell.addEventListener('click', ()=>onCellClick(i));
        cell.addEventListener('keydown', (e)=>{ if((e.key==='Enter'||e.key===' ') && !v) onCellClick(i); });
        boardEl.appendChild(cell);
      });
    }

    function onCellClick(i){
      if(gameOver || board[i]) return;
      history.push(board.slice());
      board[i]=current;
      checkGame();
      if(!gameOver) current = current==='X' ? 'O' : 'X';
      updateStatus();
      render();
    }

    function checkGame(){
      for(const line of winningLines){
        const [a,b,c]=line;
        if(board[a] && board[a]===board[b] && board[a]===board[c]){
          gameOver=true;
          highlightWin(line);
          statusEl.textContent = `Player ${board[a]} wins!`;
          return;
        }
      }
      if(board.every(Boolean)){
        gameOver=true;
        statusEl.textContent = `Draw!`;
      }
    }

    function highlightWin(line){
      const cells = boardEl.children;
      line.forEach(i=>{ cells[i].classList.add('flash'); });
    }

    function updateStatus(){
      if(!gameOver) statusEl.textContent = `Player ${current}'s turn`;
    }

    resetBtn.addEventListener('click', ()=>{
      board = Array(9).fill(null);
      current='X';
      gameOver=false;
      history=[];
      updateStatus();
      render();
    });

    undoBtn.addEventListener('click', ()=>{
      if(history.length===0 || gameOver) return;
      board = history.pop();
      current = current==='X' ? 'O' : 'X';
      gameOver=false;
      updateStatus();
      render();
    });

    hintBtn.addEventListener('click', ()=>{
      if(gameOver) return;
      const hintIndex = findHint();
      if(hintIndex!=null){
        const cell = boardEl.children[hintIndex];
        cell.animate([{transform:'scale(1)'},{transform:'scale(1.08)'},{transform:'scale(1)'}],{duration:420});
      }
    });

    // Simple heuristic: if can win, play winning move; if opponent can win, block; else pick center, corner, then side
    function findHint(){
      // check winning move
      for(let i=0;i<9;i++){
        if(board[i]) continue;
        const copy = board.slice(); copy[i]=current;
        if(isWinner(copy,current)) return i;
      }
      const opponent = current==='X'?'O':'X';
      for(let i=0;i<9;i++){
        if(board[i]) continue;
        const copy = board.slice(); copy[i]=opponent;
        if(isWinner(copy,opponent)) return i;
      }
      const order = [4,0,2,6,8,1,3,5,7];
      for(const i of order) if(!board[i]) return i;
      return null;
    }

    function isWinner(b,pl){
      return winningLines.some(([a,b1,c])=> b[a]===pl && b[b1]===pl && b[c]===pl);
    }

    // init
    render();
    updateStatus();
  </script>
</body>
</html>
